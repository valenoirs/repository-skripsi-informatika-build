<nav class="navbar navbar-expand-lg bg-light">
  <div class="container-fluid">
    <a class="navbar-brand p-3" role="button"
      ><h5>
        <img src="/assets/unima.webp" alt="" width="42px" />
        <img src="/assets/informatika.webp" alt="" width="42px" />
        <span class="fw-lights">Repository</span>
      </h5></a
    >
    <button
      class="navbar-toggler"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item">
          <a class="nav-link" href="/"><i class="bi bi-house-door"></i> Home</a>
        </li>
        <% if (locals.user) { %>
        <li class="nav-item">
          <a
            class="nav-link"
            aria-current="page"
            type="button"
            data-bs-toggle="modal"
            <% if (locals.user.isAdmin) { %>
              data-bs-target="#upload"
            <% } else {%>
              data-bs-target="#uploadMahasiswa"
            <% } %>
              ><i class="bi bi-upload"></i> Upload</a
          >
        </li>
          <% if (locals.user.isAdmin) { %>
            <li class="nav-item">
              <a
                href="/user/search?category=mahasiswa&column=name&query="
                class="nav-link"
                ><i class="bi bi-person"></i> User</a
              >
            </li>
          <% } %>
        <% } %>
        <li class="nav-item">
          <a class="nav-link" href="/skripsi/search?category=title&query="
            ><i class="bi bi-search"></i> Browse</a
          >
        </li>
        <!-- <li class="nav-item dropdown">
          <a
            class="nav-link dropdown-toggle"
            href="#"
            role="button"
            data-bs-toggle="dropdown"
            aria-expanded="false"
          >
            <i class="bi bi-search"></i> Browse
          </a>
          <ul class="dropdown-menu">
            <li>
              <a
                class="dropdown-item text-secondary"
                href="/skripsi/search?title"
                ><i class="bi bi-pen"></i> Titles</a
              >
            </li>
            <li><hr class="dropdown-divider" /></li>
            <li>
              <a
                class="dropdown-item text-secondary"
                href="/skripsi/search?author"
                ><i class="bi bi-people"></i> Authors</a
              >
            </li>
            <li><hr class="dropdown-divider" /></li>
            <li>
              <a
                class="dropdown-item text-secondary"
                href="/skripsi/search?year"
                ><i class="bi bi-calendar-date"></i> Years</a
              >
            </li>
          </ul>
        </li> -->
        <!-- <li class="nav-item">
          <a class="nav-link" href="/manage"
            ><i class="bi bi-clipboard-check"></i> Manage</a
          >
        </li> -->
      </ul>
      <div class="d-flex">
        <% if (locals.user) { %>
        <div class="dropdown">
          <a
            class="text-primary me-4"
            href="#"
            id="navbarDarkDropdownMenuLink"
            role="button"
            data-bs-toggle="dropdown"
            aria-expanded="false"
            data-bs-auto-close="outside"
            style="text-decoration: none"
            ><i class="bi bi-person-circle"></i> <%= locals.user.name %></a
          >
          <div
            class="dropdown-menu dropdown-menu-lg-end p-4"
            style="width: 200px"
          >
            <p>
              <%= locals.user.name %>
              <br />
              <span class="text-secondary" style="font-size: 0.9rem">
                <%= locals.user.nim %>
              </span>
            </p>
            <hr />
            <a
              class="text-primary me-4"
              href="/password"
              style="text-decoration: none"
            >
              <i class="bi bi-pencil-square"></i> Edit Password</a
            >
            <br />
            <a
              class="text-danger me-4"
              href="/user/signout"
              style="text-decoration: none"
            >
              <i class="bi bi-box-arrow-left"></i> Sign Out</a
            >
          </div>
        </div>
        <% } else { %>
        <div class="dropdown">
          <a
            class="text-primary me-4"
            href="#"
            id="navbarDarkDropdownMenuLink"
            role="button"
            data-bs-toggle="dropdown"
            aria-expanded="false"
            data-bs-auto-close="outside"
            style="text-decoration: none"
            ><i class="bi bi-box-arrow-in-right"></i> Masuk</a
          >
          <form
            method="POST"
            action="/user"
            class="dropdown-menu dropdown-menu-lg-end p-4"
            style="width: 300px"
          >
            <div class="mb-3">
              <label for="nim" class="form-label text-primary"
                ><i class="bi bi-123"></i> ID</label
              >
              <input
                type="password"
                class="form-control"
                id="nim"
                placeholder="ID"
                name="nim"
                required
              />
            </div>
            <div class="mb-3">
              <label for="password" class="form-label text-primary"
                ><i class="bi bi-key"></i> Password</label
              >
              <input
                type="password"
                class="form-control"
                id="password"
                placeholder="Password"
                name="password"
                required
              />
            </div>

            <button type="submit" class="btn btn-primary">
              <i class="bi bi-box-arrow-in-right"></i> Masuk
            </button>
          </form>
        </div>
        <% } %>
      </div>
    </div>
  </div>
</nav>
